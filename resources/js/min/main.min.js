function rollData(l,o,r,e,i,t){this.dice_amount=l,this.faces_amount=o,this.individual_rolls=r,this.modifier=e,this.mod_type=i,this.result=t}function incrementInputFields(l){isNaN($(document.activeElement).val())||("up"===l?$(document.activeElement).val(function(){return parseInt(this.value)+1}):"down"===l&&$(document.activeElement).val(function(){return parseInt(this.value)-1}))}function randomNumberBetween(l,o){var r=o-l;return Math.ceil(Math.random()*r)+l}function cleanFields(){var l;l="+"===$("#modifier").val()[0]?$("#modifier").val().substr(1):$("#modifier").val(),$("#modifier").val(l),["#dice-amount","#faces-amount","#modifier"].forEach(function(l){0===$(l).val().length?$(l).val("0"):$(l).val()})}function rollDice(){if(!currently_rolling){var l=1;cleanFields();for(var o=parseInt($("#dice-amount").val()),r=parseInt($("#faces-amount").val()),e=parseInt($("#modifier").val()),i=[],t=0,n=0;o>n;n++)i.push(randomNumberBetween(0,r));i.forEach(function(l){t+=l}),1===l?t+=e:2===l&&(t+=e*o);var a=new rollData;a.dice_amount=o,a.faces_amount=r,a.individual_rolls=i,a.modifier=e,a.mod_type=l,a.result=t,roll_history.push(a),roll=roll_history[roll_history.length-1],displayRollResult(roll)}}function getRollShorthand(){var l,o=roll.modifier<0?"":"+";return l=0!=roll.modifier?2===roll.mod_type?roll.dice_amount+"(d"+roll.faces_amount+o+roll.modifier+")":"("+roll.dice_amount+"d"+roll.faces_amount+")"+o+roll.modifier:roll.dice_amount+"d"+roll.faces_amount}function hideIrrelevantFields(){$(".individual-rolls").css("display","block"),$(".total").removeClass("pure-u-1").addClass("pure-u-1-2"),$(".total h1").html("Result"),1===roll.dice_amount&&0===roll.modifier&&($(".individual-rolls").css("display","none"),$(".total").removeClass("pure-u-1-2").addClass("pure-u-1"),$(".total h1").html("Rolled "+getRollShorthand(roll)))}function displayRollResult(){function l(){hideIrrelevantFields();var l=roll.modifier<0?"":"+";if(1===roll.mod_type&&0!=roll.modifier)var o=roll.individual_rolls.join(", ")+" "+l+roll.modifier;else if(2===roll.mod_type&&0!=roll.modifier)var o=roll.individual_rolls.map(function(o){return o.toString()+l+roll.modifier}).join(", ");else var o=roll.individual_rolls.join(", ");$(".results").removeClass("closed"),$(".individual-rolls h1").html("Rolled "+getRollShorthand(roll)),$(".individual-rolls span").html(o),$(".total span").html(roll.result)}currently_rolling=!0,$(".roll-loading").removeClass("closed"),window.setTimeout(function(){l()},roll_speed),window.setTimeout(function(){$(".roll-loading").addClass("closed"),currently_rolling=!1},2*roll_speed)}var roll_history=[],roll_speed=300,currently_rolling=!1,roll;