function rollData(i,e,l,t,o,a){this.dice_amount=i,this.faces_amount=e,this.individual_rolls=l,this.modifier=t,this.mod_type=o,this.result=a}function incrementInputFields(i){isNaN($(document.activeElement).val())||("up"===i?$(document.activeElement).val(function(){return parseInt(this.value)+1}):"down"===i&&$(document.activeElement).val(function(){return parseInt(this.value)-1}))}function randomNumberBetween(i,e){var l=e-i;return Math.ceil(Math.random()*l)+i}function cleanFields(){var i;i="+"===$("#modifier").val()[0]?$("#modifier").val().substr(1):$("#modifier").val(),$("#modifier").val(i),["#dice-amount","#faces-amount","#modifier"].forEach(function(i){0===$(i).val().length?$(i).val("0"):$(i).val()})}function rollDice(){var i=1;cleanFields();for(var e=parseInt($("#dice-amount").val()),l=parseInt($("#faces-amount").val()),t=parseInt($("#modifier").val()),o=[],a=0,n=0;e>n;n++)o.push(randomNumberBetween(0,l));o.forEach(function(i){a+=i}),1===i?a+=t:2===i&&(a+=t*e);var r=new rollData;r.dice_amount=e,r.faces_amount=l,r.individual_rolls=o,r.modifier=t,r.mod_type=i,r.result=a,roll_history.push(r),displayRollResult(r)}function getRollShorthand(i){var e,l=i.modifier<0?"":"+";return e=0!=i.modifier?2===i.mod_type?i.dice_amount+"(d"+i.faces_amount+l+i.modifier+")":"("+i.dice_amount+"d"+i.faces_amount+")"+l+i.modifier:i.dice_amount+"d"+i.faces_amount}function hideIrrelevantFields(){var i=roll_history[roll_history.length-1];$(".individual-rolls").css("display","block"),$(".total").removeClass("pure-u-1").addClass("pure-u-1-2"),$(".total h1").html("Result"),1===i.dice_amount&&0===i.modifier&&($(".individual-rolls").css("display","none"),$(".total").removeClass("pure-u-1-2").addClass("pure-u-1"),$(".total h1").html("Rolled "+getRollShorthand(i)))}function displayRollResult(i){hideIrrelevantFields();var e=i.modifier<0?"":"+";if(1===i.mod_type&&0!=i.modifier)var l=i.individual_rolls.join(", ")+" "+e+"&nbsp;"+i.modifier;else if(2===i.mod_type&&0!=i.modifier)var l=i.individual_rolls.map(function(l){return l.toString()+e+i.modifier}).join(", ");else var l=i.individual_rolls.join(", ");$(".results").removeClass("closed"),$(".individual-rolls h1").html("Rolled "+getRollShorthand(i)),$(".individual-rolls span").html(l),$(".total span").html(i.result)}var roll_history=[];